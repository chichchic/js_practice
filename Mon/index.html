<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>WebGL #2 - 기초 2</title>
  </head>
  <body>
    <!-- 1. 캔버스 정의. WebGL로 렌더링한 결과가 표시됩니다.-->
    <canvas id="c" width="500" height="500"></canvas>

    <!-- 2. 버텍스 셰이더를 작성합니다. -->
    <script id="2d-vertex-shader" type="notjs">
      //픽셀 단위 x, y좌표 애트리뷰트
      attribute vec2 a_position;

      //x축, y축 해상도 유니폼
      uniform vec2 u_resolution;

      void main() {
        // 픽셀을 0.0 ~ 1.0으로 위치 변환
        vec2 zeroToOne = a_position / u_resolution;

        // 0->1에서 0->2로 변환
        vec2 zeroToTwo = zeroToOne * 2.0;

        // 0->2에서 -1->+1로 변환(클립공간 좌표)
        vec2 clipSpace = zeroToTwo - 1.0;

        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
      }
    </script>

    <!-- 3. 프래그먼트 셰이더를 작성합니다. -->
    <script id="2d-fragment-shader" type="notjs">
      // 프래그먼트 셰이더는 기본 정밀도가 필요합니다.
      // 그래서 기본적으로 하나를 선택해서 설정하는데,
      // 여기서는 mediump을 선택했습니다.
      // mediump는 중간 정밀도를 의미합니다.
      precision mediump float;
      uniform vec4 u_color;
      void main() {
        // gl_FragColor는 프래그먼트 셰이더에서
        // 설정을 담당하는 특수한 변수입니다.
        gl_FragColor = u_color; // 붉은 보라색을 반환합니다.
      }
    </script>

    <!-- 4. WegGL 자바스크립트 코드를 작성합니다. -->
    <script src="./app.js"></script>
  </body>
</html>
